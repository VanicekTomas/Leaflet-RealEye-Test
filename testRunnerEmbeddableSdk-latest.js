var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function n(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,s(i.key),i)}}function s(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}t.d(e,{A:()=>B,o:()=>P});var a,l,c,u,h,d,m,f,E,v,w,g,p,y,b,I,A,T,R,O,_,N,S,M,x,W,k,H,X,Y,L,C,U=function(t,e,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(t,n):o?o.value=n:e.set(t,n),n},V=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)},P=function(){return t=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a.add(this),this.VERSION="1.6.0",this.VERSION_RE="16.0.0",this.TARGET_ORIGIN="*",l.set(this,null),c.set(this,void 0),u.set(this,!1),h.set(this,void 0),d.set(this,void 0),m.set(this,5),this.setStimulusId=function(t){return U(e,l,t,"f")},this.getStimulusId=function(){return V(e,l,"f")},U(this,d,n,"f"),U(this,h,o,"f"),this.currentUrl=window.location.href,U(this,c,new Map,"f"),V(this,a,"m",C).call(this,"Initializing EmbeddedPageSdk (version "+this.VERSION+")"),V(this,a,"m",X).call(this)?(this.setStimulusId(i),this.startNextExposure(),V(this,a,"m",S).call(this),V(this,a,"m",E).call(this)):V(this,a,"m",C).call(this,"WARNING: This page was not opened by RealEye. No data will be send to testRunner.")},(e=[{key:"startNextExposure",value:function(){V(this,a,"m",R).call(this),V(this,a,"m",T).call(this),V(this,a,"m",f).call(this)}},{key:"finishEyeTrackingTest",value:function(){var t=this;U(this,u,!1,"f"),V(this,a,"m",X).call(this)?(V(this,a,"m",C).call(this,"Sending a message to RealEye to end this eye-tracking test."),setTimeout((function(){return window.parent.postMessage("re-test-end-without-interaction",t.TARGET_ORIGIN)}),500)):V(this,a,"m",C).call(this,"This page was not opened by RealEye so eye-tracking test cannot be finished.")}},{key:"enableVirtualChin",value:function(t){window.parent.postMessage({type:"re-virtual-chin-disabled",version:this.VERSION,body:JSON.stringify(!t)},this.TARGET_ORIGIN)}}])&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,m=new WeakMap,a=new WeakSet,f=function(){var t=this;V(this,a,"m",C).call(this,"Sending dynamic AOI Logs to testRunner."),document.querySelectorAll("[".concat(P.REIO_AOI_ATTRIBUTE_NAME,"]")).forEach((function(e){var n=e,i=n.dataset[P.REIO_AOI_DATASET_NAME];V(t,a,"m",H).call(t,i,V(t,a,"m",A).call(t,n,i))}))},E=function(){var t=this,e=function(e,n){var i=null,o=e.getAttribute(P.REIO_AOI_ATTRIBUTE_NAME);(i=V(t,a,"m",A).call(t,e,o)).isInViewport=n,V(t,a,"m",H).call(t,o,i)},i=new MutationObserver((function(t,o){var r,s=n(t);try{for(s.s();!(r=s.n()).done;){var a=r.value;"childList"==a.type&&(a.addedNodes.forEach((function(t){t instanceof HTMLElement&&t.hasAttribute(P.REIO_AOI_ATTRIBUTE_NAME)&&(e(t,!0),i.observe(t,{attributes:!0,attributeFilter:[P.REIO_AOI_ATTRIBUTE_NAME],childList:!0,subtree:!0}))})),a.removedNodes.forEach((function(t){t instanceof HTMLElement&&t.hasAttribute(P.REIO_AOI_ATTRIBUTE_NAME)&&e(t,!1)}))),a.target instanceof HTMLElement&&a.attributeName===P.REIO_AOI_ATTRIBUTE_NAME&&e(a.target,null!==a.target.getAttribute(P.REIO_AOI_ATTRIBUTE_NAME))}}catch(t){s.e(t)}finally{s.f()}}));document.querySelectorAll("*").forEach((function(t){i.observe(t,{attributes:!0,attributeFilter:[P.REIO_AOI_ATTRIBUTE_NAME],childList:!0,subtree:!0})}));U(this,u,!0,"f");var o=Math.round(1e3/V(this,m,"f"));V(this,a,"m",v).call(this,o,(function(){var e=Date.now();V(t,a,"m",C).call(t,"Running: checkAllElements"),document.querySelectorAll("[".concat(P.REIO_AOI_ATTRIBUTE_NAME,"]")).forEach((function(e){return function(e){var n=e.dataset[P.REIO_AOI_DATASET_NAME],i=Object.assign({},V(t,a,"m",w).call(t,n)),o=V(t,a,"m",y).call(t,e),r=V(t,a,"m",p).call(t,e),s=V(t,a,"m",b).call(t,e),l=V(t,a,"m",I).call(t,e.getBoundingClientRect(),i)||!o;i.isInViewport===o&&i.hasFixedPosition===r&&i.zIndex===s&&l||(i.context.window.pageXOffset=window.pageXOffset,i.context.window.pageYOffset=window.pageYOffset,i.isInViewport=o,i.hasFixedPosition=r,i.zIndex=s,i.boundingClientRect=V(t,a,"m",g).call(t,e),i.timestampMs=Date.now(),i.stimulusTimestampMs=Date.now(),V(t,a,"m",H).call(t,n,i))}(e)}));var n=Date.now()-e;V(t,a,"m",C).call(t,"checkAllElements took ".concat(n," ms"))}),Date.now())},v=function t(e,n,i){var o=this;if(V(this,u,"f")){V(this,a,"m",C).call(this,"Running: #elementWatcherLoop");var r=Date.now()-i,s=e;(s=r>=e?0:e-r)<=5&&(s=0),window.setTimeout((function(){V(o,a,"m",C).call(o,"Running: #elementWatcherLoop setTimeout callback"),n(),V(o,a,"m",t).call(o,e,n,Date.now())}),s)}},w=function(t){var e=void 0;if(V(this,c,"f").has(t))e=V(this,c,"f").get(t);else{var n=document.querySelectorAll("[".concat(P.REIO_AOI_ATTRIBUTE_NAME,"='").concat(t,"']"))[0];e=V(this,a,"m",A).call(this,n,t),V(this,c,"f").set(t,e)}return e},g=function(t){var e=t.getBoundingClientRect();return new DOMRect(e.x+window.scrollX,e.y+window.scrollY,e.width,e.height)},p=function(t){var e=getComputedStyle(t),n=e.position.includes("sticky")&&t.getBoundingClientRect().y<=0;return e.position.includes("fixed")||n},y=function(t){return"none"!==t.style.display&&"hidden"!==t.style.visibility&&t.offsetHeight>0&&t.offsetWidth>0&&t.getClientRects().length>0},b=function(t){var e=Number(getComputedStyle(t).zIndex);if(!isNaN(e))return e;for(var n=0;t!==document.body;)t=t.parentElement,n++;return n},I=function(t,e){var n=new DOMRect(e.boundingClientRect.x-window.scrollX,e.boundingClientRect.y-window.scrollY,e.boundingClientRect.width,e.boundingClientRect.height);return t.x==n.x&&t.y==n.y&&t.width==n.width&&t.height==n.height},A=function(t,e){return{context:{reSdk:{version:this.VERSION},window:{devicePixelRatio:window.devicePixelRatio,pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset},documentElement:{offsetWidth:V(this,a,"m",L).call(this),offsetHeight:V(this,a,"m",Y).call(this),clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight}},aoi:{name:e},stimulus:{uri:window.location.href},timestampMs:Date.now(),stimulusTimestampMs:Date.now(),isInViewport:V(this,a,"m",y).call(this,t),hasFixedPosition:V(this,a,"m",p).call(this,t),zIndex:V(this,a,"m",b).call(this,t),boundingClientRect:V(this,a,"m",g).call(this,t)}},T=function(){var t=document.querySelectorAll("[".concat(P.REIO_AOI_ATTRIBUTE_NAME,"]"));V(this,a,"m",C).call(this,"Watched Dynamic AOI count: "+t.length);var e,i=n(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;V(this,a,"m",C).call(this,o)}}catch(t){i.e(t)}finally{i.f()}},R=function(){V(this,l,"f")?V(this,a,"m",_).call(this):V(this,a,"m",O).call(this)},O=function(){var t={uri:this.currentUrl,reSdk:{version:this.VERSION,reVersion:this.VERSION_RE},documentElement:{offsetWidth:V(this,a,"m",L).call(this),offsetHeight:V(this,a,"m",Y).call(this),clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight}};V(this,a,"m",k).call(this,"re-uri-exposure",t)},_=function(){var t={stimulusId:V(this,l,"f"),reSdk:{version:this.VERSION,reVersion:this.VERSION_RE},documentElement:{offsetWidth:V(this,a,"m",L).call(this),offsetHeight:V(this,a,"m",Y).call(this),clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight}};V(this,a,"m",k).call(this,"re-stimulus-id-exposure",t)},N=function(){window.location.href!==this.currentUrl&&(this.currentUrl=window.location.href,this.startNextExposure())},S=function(){var t=this,e=function(e){return V(t,a,"m",M).call(t,e)},n=function(e){return V(t,a,"m",x).call(t,e)};document.addEventListener("mousemove",e),document.addEventListener("mouseenter",e),document.addEventListener("mouseleave",e),document.addEventListener("click",e),document.addEventListener("dblclick",e),document.addEventListener("mousedown",e),document.addEventListener("mouseup",e),document.addEventListener("touchstart",n),document.addEventListener("touchend",n),document.addEventListener("scroll",(function(e){return V(t,a,"m",W).call(t)})),setInterval((function(){V(t,a,"m",N).call(t)}),100)},M=function(t){var e={button:t.button,buttons:t.buttons,clientX:t.clientX,clientY:t.clientY,movementX:t.movementX,movementY:t.movementY,screenX:t.screenX,screenY:t.screenY},n={type:t.type,mouseEventInit:e};V(this,a,"m",k).call(this,"re-dom-event",n)},x=function(t){var e,i=function(t){return{identifier:t.identifier,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}},o=[],r=n(t.changedTouches);try{for(r.s();!(e=r.n()).done;){var s=e.value;o.push(i(s))}}catch(t){r.e(t)}finally{r.f()}var l,c=[],u=n(t.targetTouches);try{for(u.s();!(l=u.n()).done;){var h=l.value;c.push(i(h))}}catch(t){u.e(t)}finally{u.f()}var d,m=[],f=n(t.touches);try{for(f.s();!(d=f.n()).done;){var E=d.value;m.push(i(E))}}catch(t){f.e(t)}finally{f.f()}var v={type:t.type,touchEventInit:{changedTouches:o,targetTouches:c,touches:m}};V(this,a,"m",k).call(this,"re-dom-event",v)},W=function(){var t={type:"scroll",pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset,documentElement:{offsetWidth:V(this,a,"m",L).call(this),offsetHeight:V(this,a,"m",Y).call(this),clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight}};V(this,a,"m",k).call(this,"re-dom-event",t)},k=function(t,e){V(this,a,"m",X).call(this)?window.parent.postMessage({type:t,version:this.VERSION,body:JSON.stringify(e)},this.TARGET_ORIGIN):V(this,a,"m",C).call(this,"This page was not opened by RealEye so no message will be send to testRunner.")},H=function(t,e){V(this,a,"m",C).call(this,e),V(this,c,"f").set(t,e),V(this,a,"m",k).call(this,"re-aoi-position-logs",e)},X=function(){return V(this,h,"f")||window.top!==window},Y=function(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)},L=function(){return Math.max(document.body.scrollWidth,document.body.offsetWidth,document.documentElement.clientWidth,document.documentElement.scrollWidth,document.documentElement.offsetWidth)},C=function(t){V(this,d,"f")&&console.log(t)},P.REIO_AOI_ATTRIBUTE_NAME="data-re-aoi-name",P.REIO_AOI_DATASET_NAME="reAoiName";const B=P;var D=e.o,j=e.A;export{D as EmbeddedPageSdk,j as default};